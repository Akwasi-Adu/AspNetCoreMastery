<!DOCTYPE html>
<html lang="en">

<head>
  <meta name="description" content="Learn DTOs and AutoMapper | ASP.NET Core Mastery in ASP.NET Core. Comprehensive tutorial with practical examples and best practices.">
  <meta name="keywords" content="ASP.NET Core, DTOs and AutoMapper | ASP.NET Core Mastery, C# tutorial, web development">
  <meta name="author" content="Akwasi Adu-Kyeremeh">
  <link rel="canonical" href="https://aspnetcoremastery.akwasi.dev/part-08-web-apis/06-dtos-automapper.html">
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://aspnetcoremastery.akwasi.dev/part-08-web-apis/06-dtos-automapper.html">
  <meta property="og:title" content="DTOs and AutoMapper | ASP.NET Core Mastery">
  <meta property="og:description" content="Learn DTOs and AutoMapper | ASP.NET Core Mastery in ASP.NET Core. Comprehensive tutorial with practical examples and best practices.">
  <meta property="og:image" content="https://aspnetcoremastery.akwasi.dev/assets/og-image.png">
  
  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://aspnetcoremastery.akwasi.dev/part-08-web-apis/06-dtos-automapper.html">
  <meta property="twitter:title" content="DTOs and AutoMapper | ASP.NET Core Mastery">
  <meta property="twitter:description" content="Learn DTOs and AutoMapper | ASP.NET Core Mastery in ASP.NET Core. Comprehensive tutorial with practical examples and best practices.">
  <meta property="twitter:image" content="https://aspnetcoremastery.akwasi.dev/assets/og-image.png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DTOs and AutoMapper | ASP.NET Core Mastery</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,400;0,500;0,600;0,700;1,400&family=JetBrains+Mono:wght@400;500&family=Source+Serif+4:ital,wght@0,400;0,600;1,400&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="../assets/style.css">
</head>

<body>
    <div class="page-wrapper">
        <aside class="sidebar">
            <a href="../index.html" class="sidebar-logo">ASP.NET Core Mastery</a>
            <div class="sidebar-section">Part VIII: Building Web APIs</div>
            <ul class="sidebar-nav">
                <li><a href="01-restful-principles.html">RESTful Principles</a></li>
                <li><a href="02-api-controllers.html">API Controllers</a></li>
                <li><a href="03-model-binding.html">Model Binding</a></li>
                <li><a href="04-validation.html">Validation</a></li>
                <li><a href="05-minimal-apis.html">Minimal APIs</a></li>
                <li><a href="06-dtos-automapper.html" class="active">DTOs and AutoMapper</a></li>
                <li><a href="07-api-versioning.html">API Versioning</a></li>
            </ul>
            <div class="sidebar-section">Resources</div>
            <ul class="sidebar-nav">
                <li><a href="../index.html">Full Roadmap</a></li>
            </ul>
        </aside>

        <main class="main-content">
            <div class="content-container">
                <nav class="breadcrumb">
                    <a href="../index.html">Home</a>
                    <span>‚Üí</span>
                    <a href="01-restful-principles.html">Part VIII: Building Web APIs</a>
                    <span>‚Üí</span>
                    DTOs and AutoMapper
                </nav>

                <div class="progress-indicator">
                    <span>Section 6 of 7</span>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 85.71%"></div>
                    </div>
                </div>

                <h1>DTOs and AutoMapper</h1>

                <div class="learning-objectives">
                    <h3>üéØ What You'll Learn</h3>
                    <ul>
                        <li>What DTOs are and why use them</li>
                        <li>Creating DTOs for different operations</li>
                        <li>Manual mapping vs AutoMapper</li>
                        <li>AutoMapper configuration</li>
                        <li>Mapping profiles</li>
                        <li>Best practices</li>
                    </ul>
                </div>

                <h2>What are DTOs?</h2>

                <p>
                    <strong>DTOs</strong> (Data Transfer Objects) are simple objects used to transfer data between
                    layers, separating API contracts from domain models.
                </p>

                <h3>Why Use DTOs?</h3>

                <ul>
                    <li><strong>Separation of concerns</strong>: API models ‚â† domain models</li>
                    <li><strong>Security</strong>: Don't expose internal properties</li>
                    <li><strong>Flexibility</strong>: Change domain without breaking API</li>
                    <li><strong>Validation</strong>: Different validation rules per operation</li>
                    <li><strong>Performance</strong>: Return only needed data</li>
                </ul>

                <div class="callout callout-warning">
                    <div class="callout-title">‚ö†Ô∏è Don't Expose Domain Models</div>
                    <p>
                        Never return domain entities directly from APIs. Use DTOs to control what data is exposed.
                    </p>
                </div>

                <div class="section-divider"></div>

                <h2>DTO Examples</h2>

                <h3>Domain Model</h3>

                <div class="code-header">
                    <span class="code-filename">Models/Product.cs</span>
                    <span class="code-language">C#</span>
                </div>
                <pre><code><span class="code-keyword">public</span> <span class="code-keyword">class</span> <span class="code-class">Product</span>
{
    <span class="code-keyword">public</span> <span class="code-type">int</span> <span class="code-variable">Id</span> { <span class="code-keyword">get</span>; <span class="code-keyword">set</span>; }
    <span class="code-keyword">public</span> <span class="code-type">string</span> <span class="code-variable">Name</span> { <span class="code-keyword">get</span>; <span class="code-keyword">set</span>; } = <span class="code-keyword">string</span>.<span class="code-variable">Empty</span>;
    <span class="code-keyword">public</span> <span class="code-type">decimal</span> <span class="code-variable">Price</span> { <span class="code-keyword">get</span>; <span class="code-keyword">set</span>; }
    <span class="code-keyword">public</span> <span class="code-type">string</span>? <span class="code-variable">Description</span> { <span class="code-keyword">get</span>; <span class="code-keyword">set</span>; }
    <span class="code-keyword">public</span> <span class="code-type">int</span> <span class="code-variable">Quantity</span> { <span class="code-keyword">get</span>; <span class="code-keyword">set</span>; }
    <span class="code-keyword">public</span> <span class="code-type">string</span> <span class="code-variable">Category</span> { <span class="code-keyword">get</span>; <span class="code-keyword">set</span>; } = <span class="code-keyword">string</span>.<span class="code-variable">Empty</span>;
    <span class="code-keyword">public</span> <span class="code-class">DateTime</span> <span class="code-variable">CreatedAt</span> { <span class="code-keyword">get</span>; <span class="code-keyword">set</span>; }
    <span class="code-keyword">public</span> <span class="code-class">DateTime</span>? <span class="code-variable">UpdatedAt</span> { <span class="code-keyword">get</span>; <span class="code-keyword">set</span>; }
    <span class="code-keyword">public</span> <span class="code-type">bool</span> <span class="code-variable">IsDeleted</span> { <span class="code-keyword">get</span>; <span class="code-keyword">set</span>; } <span class="code-comment">// Internal flag</span>
}</code></pre>

                <h3>Read DTO</h3>

                <div class="code-header">
                    <span class="code-filename">DTOs/ProductDto.cs</span>
                    <span class="code-language">C#</span>
                </div>
                <pre><code><span class="code-keyword">public</span> <span class="code-keyword">class</span> <span class="code-class">ProductDto</span>
{
    <span class="code-keyword">public</span> <span class="code-type">int</span> <span class="code-variable">Id</span> { <span class="code-keyword">get</span>; <span class="code-keyword">set</span>; }
    <span class="code-keyword">public</span> <span class="code-type">string</span> <span class="code-variable">Name</span> { <span class="code-keyword">get</span>; <span class="code-keyword">set</span>; } = <span class="code-keyword">string</span>.<span class="code-variable">Empty</span>;
    <span class="code-keyword">public</span> <span class="code-type">decimal</span> <span class="code-variable">Price</span> { <span class="code-keyword">get</span>; <span class="code-keyword">set</span>; }
    <span class="code-keyword">public</span> <span class="code-type">string</span>? <span class="code-variable">Description</span> { <span class="code-keyword">get</span>; <span class="code-keyword">set</span>; }
    <span class="code-keyword">public</span> <span class="code-type">int</span> <span class="code-variable">Quantity</span> { <span class="code-keyword">get</span>; <span class="code-keyword">set</span>; }
    <span class="code-keyword">public</span> <span class="code-type">string</span> <span class="code-variable">Category</span> { <span class="code-keyword">get</span>; <span class="code-keyword">set</span>; } = <span class="code-keyword">string</span>.<span class="code-variable">Empty</span>;
    
    <span class="code-comment">// No IsDeleted, CreatedAt, UpdatedAt (internal details)</span>
}</code></pre>

                <h3>Create DTO</h3>

                <div class="code-header">
                    <span class="code-filename">DTOs/CreateProductDto.cs</span>
                    <span class="code-language">C#</span>
                </div>
                <pre><code><span class="code-keyword">public</span> <span class="code-keyword">class</span> <span class="code-class">CreateProductDto</span>
{
    [<span class="code-class">Required</span>]
    [<span class="code-class">StringLength</span>(<span class="code-number">100</span>, <span class="code-variable">MinimumLength</span> = <span class="code-number">3</span>)]
    <span class="code-keyword">public</span> <span class="code-type">string</span> <span class="code-variable">Name</span> { <span class="code-keyword">get</span>; <span class="code-keyword">set</span>; } = <span class="code-keyword">string</span>.<span class="code-variable">Empty</span>;

    [<span class="code-class">Required</span>]
    [<span class="code-class">Range</span>(<span class="code-number">0.01</span>, <span class="code-number">1000000</span>)]
    <span class="code-keyword">public</span> <span class="code-type">decimal</span> <span class="code-variable">Price</span> { <span class="code-keyword">get</span>; <span class="code-keyword">set</span>; }

    [<span class="code-class">StringLength</span>(<span class="code-number">500</span>)]
    <span class="code-keyword">public</span> <span class="code-type">string</span>? <span class="code-variable">Description</span> { <span class="code-keyword">get</span>; <span class="code-keyword">set</span>; }

    [<span class="code-class">Required</span>]
    [<span class="code-class">Range</span>(<span class="code-number">0</span>, <span class="code-type">int</span>.<span class="code-variable">MaxValue</span>)]
    <span class="code-keyword">public</span> <span class="code-type">int</span> <span class="code-variable">Quantity</span> { <span class="code-keyword">get</span>; <span class="code-keyword">set</span>; }

    [<span class="code-class">Required</span>]
    <span class="code-keyword">public</span> <span class="code-type">string</span> <span class="code-variable">Category</span> { <span class="code-keyword">get</span>; <span class="code-keyword">set</span>; } = <span class="code-keyword">string</span>.<span class="code-variable">Empty</span>;
    
    <span class="code-comment">// No Id (auto-generated)</span>
}</code></pre>

                <h3>Update DTO</h3>

                <div class="code-header">
                    <span class="code-filename">DTOs/UpdateProductDto.cs</span>
                    <span class="code-language">C#</span>
                </div>
                <pre><code><span class="code-keyword">public</span> <span class="code-keyword">class</span> <span class="code-class">UpdateProductDto</span>
{
    [<span class="code-class">Required</span>]
    [<span class="code-class">StringLength</span>(<span class="code-number">100</span>, <span class="code-variable">MinimumLength</span> = <span class="code-number">3</span>)]
    <span class="code-keyword">public</span> <span class="code-type">string</span> <span class="code-variable">Name</span> { <span class="code-keyword">get</span>; <span class="code-keyword">set</span>; } = <span class="code-keyword">string</span>.<span class="code-variable">Empty</span>;

    [<span class="code-class">Required</span>]
    [<span class="code-class">Range</span>(<span class="code-number">0.01</span>, <span class="code-number">1000000</span>)]
    <span class="code-keyword">public</span> <span class="code-type">decimal</span> <span class="code-variable">Price</span> { <span class="code-keyword">get</span>; <span class="code-keyword">set</span>; }

    [<span class="code-class">StringLength</span>(<span class="code-number">500</span>)]
    <span class="code-keyword">public</span> <span class="code-type">string</span>? <span class="code-variable">Description</span> { <span class="code-keyword">get</span>; <span class="code-keyword">set</span>; }

    [<span class="code-class">Range</span>(<span class="code-number">0</span>, <span class="code-type">int</span>.<span class="code-variable">MaxValue</span>)]
    <span class="code-keyword">public</span> <span class="code-type">int</span> <span class="code-variable">Quantity</span> { <span class="code-keyword">get</span>; <span class="code-keyword">set</span>; }
}</code></pre>

                <div class="section-divider"></div>

                <h2>Manual Mapping</h2>

                <div class="code-header">
                    <span class="code-filename">Manual DTO Mapping</span>
                    <span class="code-language">C#</span>
                </div>
                <pre><code><span class="code-comment">// Create: DTO ‚Üí Domain</span>
[<span class="code-class">HttpPost</span>]
<span class="code-keyword">public</span> <span class="code-class">ActionResult</span> <span class="code-method">CreateProduct</span>(<span class="code-class">CreateProductDto</span> <span class="code-variable">dto</span>)
{
    <span class="code-keyword">var</span> <span class="code-variable">product</span> = <span class="code-keyword">new</span> <span class="code-class">Product</span>
    {
        <span class="code-variable">Name</span> = <span class="code-variable">dto</span>.<span class="code-variable">Name</span>,
        <span class="code-variable">Price</span> = <span class="code-variable">dto</span>.<span class="code-variable">Price</span>,
        <span class="code-variable">Description</span> = <span class="code-variable">dto</span>.<span class="code-variable">Description</span>,
        <span class="code-variable">Quantity</span> = <span class="code-variable">dto</span>.<span class="code-variable">Quantity</span>,
        <span class="code-variable">Category</span> = <span class="code-variable">dto</span>.<span class="code-variable">Category</span>,
        <span class="code-variable">CreatedAt</span> = <span class="code-class">DateTime</span>.<span class="code-variable">UtcNow</span>
    };
    
    <span class="code-comment">// Save product...</span>
    <span class="code-keyword">return</span> <span class="code-method">Ok</span>(<span class="code-variable">product</span>);
}

<span class="code-comment">// Read: Domain ‚Üí DTO</span>
[<span class="code-class">HttpGet</span>(<span class="code-string">"{id}"</span>)]
<span class="code-keyword">public</span> <span class="code-class">ActionResult</span> <span class="code-method">GetProduct</span>(<span class="code-type">int</span> <span class="code-variable">id</span>)
{
    <span class="code-keyword">var</span> <span class="code-variable">product</span> = <span class="code-comment">/* get from database */</span>;
    
    <span class="code-keyword">var</span> <span class="code-variable">dto</span> = <span class="code-keyword">new</span> <span class="code-class">ProductDto</span>
    {
        <span class="code-variable">Id</span> = <span class="code-variable">product</span>.<span class="code-variable">Id</span>,
        <span class="code-variable">Name</span> = <span class="code-variable">product</span>.<span class="code-variable">Name</span>,
        <span class="code-variable">Price</span> = <span class="code-variable">product</span>.<span class="code-variable">Price</span>,
        <span class="code-variable">Description</span> = <span class="code-variable">product</span>.<span class="code-variable">Description</span>,
        <span class="code-variable">Quantity</span> = <span class="code-variable">product</span>.<span class="code-variable">Quantity</span>,
        <span class="code-variable">Category</span> = <span class="code-variable">product</span>.<span class="code-variable">Category</span>
    };
    
    <span class="code-keyword">return</span> <span class="code-method">Ok</span>(<span class="code-variable">dto</span>);
}</code></pre>

                <div class="callout callout-info">
                    <div class="callout-title">‚ÑπÔ∏è Manual Mapping</div>
                    <p>
                        Manual mapping is verbose but explicit. Good for simple cases, but tedious for complex models.
                    </p>
                </div>

                <div class="section-divider"></div>

                <h2>AutoMapper</h2>

                <p>
                    <strong>AutoMapper</strong> is a library that automatically maps between objects based on
                    conventions.
                </p>

                <h3>Installation</h3>

                <div class="code-header">
                    <span class="code-filename">Package Installation</span>
                    <span class="code-language">Bash</span>
                </div>
                <pre><code>dotnet add package AutoMapper.Extensions.Microsoft.DependencyInjection</code></pre>

                <h3>Creating a Mapping Profile</h3>

                <div class="code-header">
                    <span class="code-filename">Mappings/ProductProfile.cs</span>
                    <span class="code-language">C#</span>
                </div>
                <pre><code><span class="code-keyword">public</span> <span class="code-keyword">class</span> <span class="code-class">ProductProfile</span> : <span class="code-class">Profile</span>
{
    <span class="code-keyword">public</span> <span class="code-method">ProductProfile</span>()
    {
        <span class="code-comment">// Domain ‚Üí DTO</span>
        <span class="code-method">CreateMap</span>&lt;<span class="code-class">Product</span>, <span class="code-class">ProductDto</span>&gt;();

        <span class="code-comment">// DTO ‚Üí Domain</span>
        <span class="code-method">CreateMap</span>&lt;<span class="code-class">CreateProductDto</span>, <span class="code-class">Product</span>&gt;()
            .<span class="code-method">ForMember</span>(<span class="code-variable">dest</span> =&gt; <span class="code-variable">dest</span>.<span class="code-variable">CreatedAt</span>, <span class="code-variable">opt</span> =&gt; <span class="code-variable">opt</span>.<span class="code-method">MapFrom</span>(<span class="code-variable">_</span> =&gt; <span class="code-class">DateTime</span>.<span class="code-variable">UtcNow</span>));

        <span class="code-method">CreateMap</span>&lt;<span class="code-class">UpdateProductDto</span>, <span class="code-class">Product</span>&gt;()
            .<span class="code-method">ForMember</span>(<span class="code-variable">dest</span> =&gt; <span class="code-variable">dest</span>.<span class="code-variable">UpdatedAt</span>, <span class="code-variable">opt</span> =&gt; <span class="code-variable">opt</span>.<span class="code-method">MapFrom</span>(<span class="code-variable">_</span> =&gt; <span class="code-class">DateTime</span>.<span class="code-variable">UtcNow</span>));
    }
}</code></pre>

                <h3>Register AutoMapper</h3>

                <div class="code-header">
                    <span class="code-filename">Program.cs</span>
                    <span class="code-language">C#</span>
                </div>
                <pre><code><span class="code-variable">builder</span>.<span class="code-variable">Services</span>.<span class="code-method">AddAutoMapper</span>(<span class="code-keyword">typeof</span>(<span class="code-class">ProductProfile</span>));</code></pre>

                <h3>Using AutoMapper</h3>

                <div class="code-header">
                    <span class="code-filename">Controllers/ProductsController.cs</span>
                    <span class="code-language">C#</span>
                </div>
                <pre><code>[<span class="code-class">ApiController</span>]
[<span class="code-class">Route</span>(<span class="code-string">"api/[controller]"</span>)]
<span class="code-keyword">public</span> <span class="code-keyword">class</span> <span class="code-class">ProductsController</span> : <span class="code-class">ControllerBase</span>
{
    <span class="code-keyword">private</span> <span class="code-keyword">readonly</span> <span class="code-class">IMapper</span> <span class="code-variable">_mapper</span>;

    <span class="code-keyword">public</span> <span class="code-method">ProductsController</span>(<span class="code-class">IMapper</span> <span class="code-variable">mapper</span>)
    {
        <span class="code-variable">_mapper</span> = <span class="code-variable">mapper</span>;
    }

    [<span class="code-class">HttpGet</span>(<span class="code-string">"{id}"</span>)]
    <span class="code-keyword">public</span> <span class="code-class">ActionResult</span>&lt;<span class="code-class">ProductDto</span>&gt; <span class="code-method">GetProduct</span>(<span class="code-type">int</span> <span class="code-variable">id</span>)
    {
        <span class="code-keyword">var</span> <span class="code-variable">product</span> = <span class="code-comment">/* get from database */</span>;
        
        <span class="code-comment">// Map: Product ‚Üí ProductDto</span>
        <span class="code-keyword">var</span> <span class="code-variable">dto</span> = <span class="code-variable">_mapper</span>.<span class="code-method">Map</span>&lt;<span class="code-class">ProductDto</span>&gt;(<span class="code-variable">product</span>);
        
        <span class="code-keyword">return</span> <span class="code-method">Ok</span>(<span class="code-variable">dto</span>);
    }

    [<span class="code-class">HttpPost</span>]
    <span class="code-keyword">public</span> <span class="code-class">ActionResult</span>&lt;<span class="code-class">ProductDto</span>&gt; <span class="code-method">CreateProduct</span>(<span class="code-class">CreateProductDto</span> <span class="code-variable">dto</span>)
    {
        <span class="code-comment">// Map: CreateProductDto ‚Üí Product</span>
        <span class="code-keyword">var</span> <span class="code-variable">product</span> = <span class="code-variable">_mapper</span>.<span class="code-method">Map</span>&lt;<span class="code-class">Product</span>&gt;(<span class="code-variable">dto</span>);
        
        <span class="code-comment">// Save product...</span>
        
        <span class="code-comment">// Map: Product ‚Üí ProductDto</span>
        <span class="code-keyword">var</span> <span class="code-variable">resultDto</span> = <span class="code-variable">_mapper</span>.<span class="code-method">Map</span>&lt;<span class="code-class">ProductDto</span>&gt;(<span class="code-variable">product</span>);
        
        <span class="code-keyword">return</span> <span class="code-method">CreatedAtAction</span>(<span class="code-keyword">nameof</span>(<span class="code-method">GetProduct</span>), <span class="code-keyword">new</span> { <span class="code-variable">id</span> = <span class="code-variable">product</span>.<span class="code-variable">Id</span> }, <span class="code-variable">resultDto</span>);
    }

    [<span class="code-class">HttpPut</span>(<span class="code-string">"{id}"</span>)]
    <span class="code-keyword">public</span> <span class="code-class">ActionResult</span> <span class="code-method">UpdateProduct</span>(<span class="code-type">int</span> <span class="code-variable">id</span>, <span class="code-class">UpdateProductDto</span> <span class="code-variable">dto</span>)
    {
        <span class="code-keyword">var</span> <span class="code-variable">product</span> = <span class="code-comment">/* get from database */</span>;
        
        <span class="code-comment">// Map: UpdateProductDto ‚Üí Product (update existing)</span>
        <span class="code-variable">_mapper</span>.<span class="code-method">Map</span>(<span class="code-variable">dto</span>, <span class="code-variable">product</span>);
        
        <span class="code-comment">// Save product...</span>
        
        <span class="code-keyword">return</span> <span class="code-method">NoContent</span>();
    }
}</code></pre>

                <div class="section-divider"></div>

                <h2>Advanced Mapping</h2>

                <h3>Custom Property Mapping</h3>

                <div class="code-header">
                    <span class="code-filename">Custom Mappings</span>
                    <span class="code-language">C#</span>
                </div>
                <pre><code><span class="code-keyword">public</span> <span class="code-keyword">class</span> <span class="code-class">ProductProfile</span> : <span class="code-class">Profile</span>
{
    <span class="code-keyword">public</span> <span class="code-method">ProductProfile</span>()
    {
        <span class="code-method">CreateMap</span>&lt;<span class="code-class">Product</span>, <span class="code-class">ProductDto</span>&gt;()
            <span class="code-comment">// Map FullName from FirstName + LastName</span>
            .<span class="code-method">ForMember</span>(<span class="code-variable">dest</span> =&gt; <span class="code-variable">dest</span>.<span class="code-variable">FullName</span>, 
                <span class="code-variable">opt</span> =&gt; <span class="code-variable">opt</span>.<span class="code-method">MapFrom</span>(<span class="code-variable">src</span> =&gt; <span class="code-string">$"</span>{<span class="code-variable">src</span>.<span class="code-variable">FirstName</span>}<span class="code-string"> </span>{<span class="code-variable">src</span>.<span class="code-variable">LastName</span>}<span class="code-string">"</span>))
            
            <span class="code-comment">// Ignore property</span>
            .<span class="code-method">ForMember</span>(<span class="code-variable">dest</span> =&gt; <span class="code-variable">dest</span>.<span class="code-variable">InternalId</span>, <span class="code-variable">opt</span> =&gt; <span class="code-variable">opt</span>.<span class="code-method">Ignore</span>())
            
            <span class="code-comment">// Conditional mapping</span>
            .<span class="code-method">ForMember</span>(<span class="code-variable">dest</span> =&gt; <span class="code-variable">dest</span>.<span class="code-variable">Discount</span>, 
                <span class="code-variable">opt</span> =&gt; <span class="code-variable">opt</span>.<span class="code-method">MapFrom</span>(<span class="code-variable">src</span> =&gt; <span class="code-variable">src</span>.<span class="code-variable">Price</span> > <span class="code-number">100</span> ? <span class="code-number">0.1m</span> : <span class="code-number">0</span>));
    }
}</code></pre>

                <h3>Mapping Collections</h3>

                <div class="code-header">
                    <span class="code-filename">Mapping Lists</span>
                    <span class="code-language">C#</span>
                </div>
                <pre><code>[<span class="code-class">HttpGet</span>]
<span class="code-keyword">public</span> <span class="code-class">ActionResult</span>&lt;<span class="code-type">List</span>&lt;<span class="code-class">ProductDto</span>&gt;&gt; <span class="code-method">GetProducts</span>()
{
    <span class="code-keyword">var</span> <span class="code-variable">products</span> = <span class="code-comment">/* get from database */</span>;
    
    <span class="code-comment">// Map: List&lt;Product&gt; ‚Üí List&lt;ProductDto&gt;</span>
    <span class="code-keyword">var</span> <span class="code-variable">dtos</span> = <span class="code-variable">_mapper</span>.<span class="code-method">Map</span>&lt;<span class="code-type">List</span>&lt;<span class="code-class">ProductDto</span>&gt;&gt;(<span class="code-variable">products</span>);
    
    <span class="code-keyword">return</span> <span class="code-method">Ok</span>(<span class="code-variable">dtos</span>);
}</code></pre>

                <h2>Complete InvenTrack Example</h2>

                <div class="code-header">
                    <span class="code-filename">Mappings/ProductProfile.cs</span>
                    <span class="code-language">C#</span>
                </div>
                <pre><code><span class="code-keyword">public</span> <span class="code-keyword">class</span> <span class="code-class">ProductProfile</span> : <span class="code-class">Profile</span>
{
    <span class="code-keyword">public</span> <span class="code-method">ProductProfile</span>()
    {
        <span class="code-comment">// Read: Domain ‚Üí DTO</span>
        <span class="code-method">CreateMap</span>&lt;<span class="code-class">Product</span>, <span class="code-class">ProductDto</span>&gt;();

        <span class="code-comment">// Create: DTO ‚Üí Domain</span>
        <span class="code-method">CreateMap</span>&lt;<span class="code-class">CreateProductDto</span>, <span class="code-class">Product</span>&gt;()
            .<span class="code-method">ForMember</span>(<span class="code-variable">dest</span> =&gt; <span class="code-variable">dest</span>.<span class="code-variable">Id</span>, <span class="code-variable">opt</span> =&gt; <span class="code-variable">opt</span>.<span class="code-method">Ignore</span>())
            .<span class="code-method">ForMember</span>(<span class="code-variable">dest</span> =&gt; <span class="code-variable">dest</span>.<span class="code-variable">CreatedAt</span>, <span class="code-variable">opt</span> =&gt; <span class="code-variable">opt</span>.<span class="code-method">MapFrom</span>(<span class="code-variable">_</span> =&gt; <span class="code-class">DateTime</span>.<span class="code-variable">UtcNow</span>))
            .<span class="code-method">ForMember</span>(<span class="code-variable">dest</span> =&gt; <span class="code-variable">dest</span>.<span class="code-variable">IsDeleted</span>, <span class="code-variable">opt</span> =&gt; <span class="code-variable">opt</span>.<span class="code-method">MapFrom</span>(<span class="code-variable">_</span> =&gt; <span class="code-keyword">false</span>));

        <span class="code-comment">// Update: DTO ‚Üí Domain</span>
        <span class="code-method">CreateMap</span>&lt;<span class="code-class">UpdateProductDto</span>, <span class="code-class">Product</span>&gt;()
            .<span class="code-method">ForMember</span>(<span class="code-variable">dest</span> =&gt; <span class="code-variable">dest</span>.<span class="code-variable">Id</span>, <span class="code-variable">opt</span> =&gt; <span class="code-variable">opt</span>.<span class="code-method">Ignore</span>())
            .<span class="code-method">ForMember</span>(<span class="code-variable">dest</span> =&gt; <span class="code-variable">dest</span>.<span class="code-variable">CreatedAt</span>, <span class="code-variable">opt</span> =&gt; <span class="code-variable">opt</span>.<span class="code-method">Ignore</span>())
            .<span class="code-method">ForMember</span>(<span class="code-variable">dest</span> =&gt; <span class="code-variable">dest</span>.<span class="code-variable">UpdatedAt</span>, <span class="code-variable">opt</span> =&gt; <span class="code-variable">opt</span>.<span class="code-method">MapFrom</span>(<span class="code-variable">_</span> =&gt; <span class="code-class">DateTime</span>.<span class="code-variable">UtcNow</span>));
    }
}</code></pre>

                <div class="code-header">
                    <span class="code-filename">Program.cs</span>
                    <span class="code-language">C#</span>
                </div>
                <pre><code><span class="code-variable">builder</span>.<span class="code-variable">Services</span>.<span class="code-method">AddAutoMapper</span>(<span class="code-keyword">typeof</span>(<span class="code-class">Program</span>));</code></pre>

                <div class="code-header">
                    <span class="code-filename">Controllers/ProductsController.cs</span>
                    <span class="code-language">C#</span>
                </div>
                <pre><code>[<span class="code-class">ApiController</span>]
[<span class="code-class">Route</span>(<span class="code-string">"api/[controller]"</span>)]
<span class="code-keyword">public</span> <span class="code-keyword">class</span> <span class="code-class">ProductsController</span> : <span class="code-class">ControllerBase</span>
{
    <span class="code-keyword">private</span> <span class="code-keyword">readonly</span> <span class="code-class">IProductService</span> <span class="code-variable">_productService</span>;
    <span class="code-keyword">private</span> <span class="code-keyword">readonly</span> <span class="code-class">IMapper</span> <span class="code-variable">_mapper</span>;

    <span class="code-keyword">public</span> <span class="code-method">ProductsController</span>(<span class="code-class">IProductService</span> <span class="code-variable">productService</span>, <span class="code-class">IMapper</span> <span class="code-variable">mapper</span>)
    {
        <span class="code-variable">_productService</span> = <span class="code-variable">productService</span>;
        <span class="code-variable">_mapper</span> = <span class="code-variable">mapper</span>;
    }

    [<span class="code-class">HttpGet</span>]
    <span class="code-keyword">public</span> <span class="code-keyword">async</span> <span class="code-class">Task</span>&lt;<span class="code-class">ActionResult</span>&lt;<span class="code-type">List</span>&lt;<span class="code-class">ProductDto</span>&gt;&gt;&gt; <span class="code-method">GetProducts</span>()
    {
        <span class="code-keyword">var</span> <span class="code-variable">products</span> = <span class="code-keyword">await</span> <span class="code-variable">_productService</span>.<span class="code-method">GetAllAsync</span>();
        <span class="code-keyword">var</span> <span class="code-variable">dtos</span> = <span class="code-variable">_mapper</span>.<span class="code-method">Map</span>&lt;<span class="code-type">List</span>&lt;<span class="code-class">ProductDto</span>&gt;&gt;(<span class="code-variable">products</span>);
        <span class="code-keyword">return</span> <span class="code-method">Ok</span>(<span class="code-variable">dtos</span>);
    }

    [<span class="code-class">HttpGet</span>(<span class="code-string">"{id}"</span>)]
    <span class="code-keyword">public</span> <span class="code-keyword">async</span> <span class="code-class">Task</span>&lt;<span class="code-class">ActionResult</span>&lt;<span class="code-class">ProductDto</span>&gt;&gt; <span class="code-method">GetProduct</span>(<span class="code-type">int</span> <span class="code-variable">id</span>)
    {
        <span class="code-keyword">var</span> <span class="code-variable">product</span> = <span class="code-keyword">await</span> <span class="code-variable">_productService</span>.<span class="code-method">GetByIdAsync</span>(<span class="code-variable">id</span>);
        
        <span class="code-keyword">if</span> (<span class="code-variable">product</span> == <span class="code-keyword">null</span>)
            <span class="code-keyword">return</span> <span class="code-method">NotFound</span>();
        
        <span class="code-keyword">var</span> <span class="code-variable">dto</span> = <span class="code-variable">_mapper</span>.<span class="code-method">Map</span>&lt;<span class="code-class">ProductDto</span>&gt;(<span class="code-variable">product</span>);
        <span class="code-keyword">return</span> <span class="code-method">Ok</span>(<span class="code-variable">dto</span>);
    }

    [<span class="code-class">HttpPost</span>]
    <span class="code-keyword">public</span> <span class="code-keyword">async</span> <span class="code-class">Task</span>&lt;<span class="code-class">ActionResult</span>&lt;<span class="code-class">ProductDto</span>&gt;&gt; <span class="code-method">CreateProduct</span>(<span class="code-class">CreateProductDto</span> <span class="code-variable">dto</span>)
    {
        <span class="code-keyword">var</span> <span class="code-variable">product</span> = <span class="code-variable">_mapper</span>.<span class="code-method">Map</span>&lt;<span class="code-class">Product</span>&gt;(<span class="code-variable">dto</span>);
        <span class="code-keyword">var</span> <span class="code-variable">created</span> = <span class="code-keyword">await</span> <span class="code-variable">_productService</span>.<span class="code-method">CreateAsync</span>(<span class="code-variable">product</span>);
        <span class="code-keyword">var</span> <span class="code-variable">resultDto</span> = <span class="code-variable">_mapper</span>.<span class="code-method">Map</span>&lt;<span class="code-class">ProductDto</span>&gt;(<span class="code-variable">created</span>);
        
        <span class="code-keyword">return</span> <span class="code-method">CreatedAtAction</span>(<span class="code-keyword">nameof</span>(<span class="code-method">GetProduct</span>), <span class="code-keyword">new</span> { <span class="code-variable">id</span> = <span class="code-variable">created</span>.<span class="code-variable">Id</span> }, <span class="code-variable">resultDto</span>);
    }

    [<span class="code-class">HttpPut</span>(<span class="code-string">"{id}"</span>)]
    <span class="code-keyword">public</span> <span class="code-keyword">async</span> <span class="code-class">Task</span>&lt;<span class="code-class">ActionResult</span>&gt; <span class="code-method">UpdateProduct</span>(<span class="code-type">int</span> <span class="code-variable">id</span>, <span class="code-class">UpdateProductDto</span> <span class="code-variable">dto</span>)
    {
        <span class="code-keyword">var</span> <span class="code-variable">product</span> = <span class="code-keyword">await</span> <span class="code-variable">_productService</span>.<span class="code-method">GetByIdAsync</span>(<span class="code-variable">id</span>);
        
        <span class="code-keyword">if</span> (<span class="code-variable">product</span> == <span class="code-keyword">null</span>)
            <span class="code-keyword">return</span> <span class="code-method">NotFound</span>();
        
        <span class="code-variable">_mapper</span>.<span class="code-method">Map</span>(<span class="code-variable">dto</span>, <span class="code-variable">product</span>);
        <span class="code-keyword">await</span> <span class="code-variable">_productService</span>.<span class="code-method">UpdateAsync</span>(<span class="code-variable">product</span>);
        
        <span class="code-keyword">return</span> <span class="code-method">NoContent</span>();
    }
}</code></pre>

                <h2>Best Practices</h2>

                <ul>
                    <li><strong>Always use DTOs</strong>: Never expose domain models</li>
                    <li><strong>Separate DTOs</strong>: Different DTOs for Create/Update/Read</li>
                    <li><strong>AutoMapper profiles</strong>: Organize mappings by feature</li>
                    <li><strong>Explicit mapping</strong>: Use ForMember for clarity</li>
                    <li><strong>Validation</strong>: Add validation attributes to DTOs</li>
                    <li><strong>Naming</strong>: Use consistent DTO naming (CreateXDto, UpdateXDto, XDto)</li>
                    <li><strong>Security</strong>: Don't include sensitive fields in DTOs</li>
                </ul>

                <h2>Key Takeaways</h2>

                <ul>
                    <li><strong>DTOs</strong>: Separate API contracts from domain models</li>
                    <li><strong>Security</strong>: Control what data is exposed</li>
                    <li><strong>Flexibility</strong>: Change domain without breaking API</li>
                    <li><strong>AutoMapper</strong>: Automate object mapping</li>
                    <li><strong>Profiles</strong>: Organize mapping configuration</li>
                    <li><strong>ForMember</strong>: Custom property mapping</li>
                    <li><strong>Collections</strong>: Map lists automatically</li>
                    <li><strong>Validation</strong>: Different rules per DTO</li>
                </ul>

                <div class="callout callout-concept">
                    <div class="callout-title">üéØ Next Steps</div>
                    <p>
                        You now understand DTOs and AutoMapper! In the final section, we'll explore
                        <strong>API Versioning</strong>‚Äîhow to evolve your API over time while maintaining
                        backward compatibility.
                    </p>
                </div>

                <nav class="page-nav">
                    <a href="05-minimal-apis.html" class="prev">Minimal APIs</a>
                    <a href="07-api-versioning.html" class="next">API Versioning</a>
                </nav>

            
        <footer class="page-footer">
          Built with üíú by <a href="https://akwasi.dev" target="_blank" rel="noopener noreferrer">Akwasi Adu-Kyeremeh</a> for developers who want to truly understand what they're building.
        </footer>

      </div>
        </main>
    </div>
</body>

</html>